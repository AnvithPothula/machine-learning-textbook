<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Confusion Matrix Explorer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .controls {
            margin-bottom: 30px;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: center;
        }
        .controls label {
            font-weight: 600;
            color: #555;
        }
        .controls select, .controls input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .matrix-container {
            margin: 30px 0;
        }
        table {
            border-collapse: collapse;
            margin: 0 auto;
        }
        td, th {
            border: 1px solid #ddd;
            padding: 15px;
            text-align: center;
            min-width: 80px;
        }
        th {
            background: #2196F3;
            color: white;
            font-weight: 600;
        }
        .cell-tp { background: #4CAF50; color: white; font-weight: bold; }
        .cell-tn { background: #4CAF50; color: white; font-weight: bold; }
        .cell-fp { background: #f44336; color: white; font-weight: bold; }
        .cell-fn { background: #f44336; color: white; font-weight: bold; }
        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .metric-card {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .metric-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }
        .metric-value {
            font-size: 24px;
            font-weight: bold;
            color: #2196F3;
        }
        .info-box {
            background: #E3F2FD;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin-top: 20px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>Interactive Confusion Matrix Explorer</h1>

    <div class="container">
        <div class="controls">
            <label>Example:</label>
            <select id="exampleSelect">
                <option value="custom">Custom</option>
                <option value="good">Good Classifier</option>
                <option value="poor">Poor Classifier</option>
                <option value="imbalanced">Imbalanced Data</option>
            </select>

            <label>True Positives:</label>
            <input type="number" id="tp" value="85" min="0" max="100">

            <label>True Negatives:</label>
            <input type="number" id="tn" value="90" min="0" max="100">

            <label>False Positives:</label>
            <input type="number" id="fp" value="10" min="0" max="100">

            <label>False Negatives:</label>
            <input type="number" id="fn" value="15" min="0" max="100">
        </div>

        <div class="matrix-container">
            <table id="confusionMatrix">
                <tr>
                    <th colspan="2" rowspan="2"></th>
                    <th colspan="2">Predicted</th>
                </tr>
                <tr>
                    <th>Positive</th>
                    <th>Negative</th>
                </tr>
                <tr>
                    <th rowspan="2">Actual</th>
                    <th>Positive</th>
                    <td class="cell-tp" id="cell-tp">85</td>
                    <td class="cell-fn" id="cell-fn">15</td>
                </tr>
                <tr>
                    <th>Negative</th>
                    <td class="cell-fp" id="cell-fp">10</td>
                    <td class="cell-tn" id="cell-tn">90</td>
                </tr>
            </table>
        </div>

        <div class="metrics">
            <div class="metric-card">
                <div class="metric-label">Accuracy</div>
                <div class="metric-value" id="accuracy">0.875</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Precision</div>
                <div class="metric-value" id="precision">0.895</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Recall (Sensitivity)</div>
                <div class="metric-value" id="recall">0.850</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">F1 Score</div>
                <div class="metric-value" id="f1">0.872</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Specificity</div>
                <div class="metric-value" id="specificity">0.900</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">False Positive Rate</div>
                <div class="metric-value" id="fpr">0.100</div>
            </div>
        </div>

        <div class="info-box">
            <h3>Understanding the Metrics</h3>
            <p><strong>Accuracy</strong> = (TP + TN) / (TP + TN + FP + FN)</p>
            <p><strong>Precision</strong> = TP / (TP + FP) - Of all positive predictions, how many were correct?</p>
            <p><strong>Recall</strong> = TP / (TP + FN) - Of all actual positives, how many did we find?</p>
            <p><strong>F1 Score</strong> = 2 × (Precision × Recall) / (Precision + Recall)</p>
        </div>
    </div>

    <script>
        const inputs = {
            tp: document.getElementById('tp'),
            tn: document.getElementById('tn'),
            fp: document.getElementById('fp'),
            fn: document.getElementById('fn')
        };
        const exampleSelect = document.getElementById('exampleSelect');

        function updateMatrix() {
            const tp = parseInt(inputs.tp.value);
            const tn = parseInt(inputs.tn.value);
            const fp = parseInt(inputs.fp.value);
            const fn = parseInt(inputs.fn.value);

            // Update matrix cells
            document.getElementById('cell-tp').textContent = tp;
            document.getElementById('cell-tn').textContent = tn;
            document.getElementById('cell-fp').textContent = fp;
            document.getElementById('cell-fn').textContent = fn;

            // Calculate metrics
            const total = tp + tn + fp + fn;
            const accuracy = (tp + tn) / total;
            const precision = tp / (tp + fp) || 0;
            const recall = tp / (tp + fn) || 0;
            const f1 = 2 * (precision * recall) / (precision + recall) || 0;
            const specificity = tn / (tn + fp) || 0;
            const fpr = fp / (fp + tn) || 0;

            // Update metric displays
            document.getElementById('accuracy').textContent = accuracy.toFixed(3);
            document.getElementById('precision').textContent = precision.toFixed(3);
            document.getElementById('recall').textContent = recall.toFixed(3);
            document.getElementById('f1').textContent = f1.toFixed(3);
            document.getElementById('specificity').textContent = specificity.toFixed(3);
            document.getElementById('fpr').textContent = fpr.toFixed(3);
        }

        // Add event listeners
        Object.values(inputs).forEach(input => {
            input.addEventListener('input', () => {
                exampleSelect.value = 'custom';
                updateMatrix();
            });
        });

        exampleSelect.addEventListener('change', () => {
            const examples = {
                good: { tp: 85, tn: 90, fp: 10, fn: 15 },
                poor: { tp: 45, tn: 50, fp: 50, fn: 55 },
                imbalanced: { tp: 10, tn: 170, fp: 5, fn: 15 }
            };

            const example = examples[exampleSelect.value];
            if (example) {
                inputs.tp.value = example.tp;
                inputs.tn.value = example.tn;
                inputs.fp.value = example.fp;
                inputs.fn.value = example.fn;
                updateMatrix();
            }
        });

        // Initial update
        updateMatrix();
    </script>
</body>
</html>
